{
    "builders": [
        {
            "type": "digitalocean",
            "api_token": "bdbbb8daafec2eb609975cf37b027f8f50dabeffb1e90f3774ad9365bca2d437",
            "image": "ubuntu-16-04-x64",
            "region": "fra1",
            "size": "512mb",
            "ssh_username": "root"
        },
        {
            "type": "virtualbox-iso",
            "guest_os_type": "Ubuntu_64",
            "iso_url": "http://releases.ubuntu.com/16.04/ubuntu-16.04.4-server-amd64.iso",
            "iso_checksum": "6a7f31eb125a0b2908cf2333d7777c82",
            "iso_checksum_type": "md5",
            "disk_size": 15000,
            "headless": "false",
            "output_directory": "output-ubuntu-duck",
            "vm_name": "ubuntu-duck-16.04-amd64",
            "http_directory": "http",
            "boot_wait": "5s",
            "boot_command": [
                "<enter><wait>",
                "<f6><esc>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs><bs><bs><bs><bs><bs><bs><bs>",
                "<bs><bs><bs>",
                "/install/vmlinuz ",
                "initrd=/install/initrd.gz ",
                "net.ifnames=0 ",
                "auto-install/enable=true ",
                "debconf/priority=critical ",
                "preseed/url=http://{{.HTTPIP}}:{{.HTTPPort}}/preseed.cfg",
                "<enter>"
            ],
            "ssh_timeout": "60m",
            "ssh_username": "ubuntu",
            "ssh_password": "ubuntu",
            "shutdown_command": "sudo systemctl poweroff",
            "vboxmanage": [
                ["modifyvm", "{{.Name}}", "--memory", 512],
                ["modifyvm", "{{.Name}}", "--cpus", 1]
            ]
        }],
    "provisioners": [
        {
            "type": "shell",
            "execute_command": "echo 'vagrant' | {{ .Vars }} sudo -E -S sh '{{ .Path }}'",
            "inline": [
                "sleep 30",
                "sudo apt-add-repository ppa:ansible/ansible",
                "sudo apt-get update",
                "sudo apt-get install -y ansible"
            ]
        },
        {
            "type": "ansible-local",
            "playbook_file": "./ansible-nginx/playbook.yml",
            "playbook_dir": "./ansible-nginx"
        }
    ],
    "post-processors": [{
        "type": "vagrant",
        "only": ["virtualbox-iso"]
    }]
}